CREATE PROCEDURE DB2DBA.FMS_FETCH_DEPT_DETAILS

--CALL DB2DBA.FMS_FETCH_DEPT_DETAILS
---------------------------------------------------------------------------------------------------
------------------------------------------PROCEDURE CREATION STARTS--------------------------------
---------------------------------------------------------------------------------------------------

----------------------------------------------------- MODIFICATION LOG ------------------------------------------------------------------

--  AUTHOR            VERSION                  CHANGE DESC                   DATE( DD-MM-YYYY)           CREATED BY		  RELEASE

--  ATCS                1.0                     ORIGINAL                        24-07-2018              VAISHNAVI AGRAWAL
-----------------------------------------------------------------------------------------------------------------------------------------

LANGUAGE SQL 
DYNAMIC RESULT SETS 1 
BEGIN 

---------------------------------------------------------------------------------------------------
----------------------------LOCAL VARIABLES DECLARATION--------------------------------------------
---------------------------------------------------------------------------------------------------
DECLARE ID CHAR(10);
DECLARE NAME CHAR(30);
---------------------------------------------------------------------------------------------------
---------------------------LOCAL VARIABLE DECLARATION ENDS-----------------------------------------
---------------------------------------------------------------------------------------------------


---------------------------------------------------------------------------------------------------
--------------------------------DECLARE CURSOR C_FETCH_DEPT_DATA-----------------------------------
------------------------------- FOR FETCHING DATA FROM VIEW----------------------------------------
---------------------------------------------------------------------------------------------------

DECLARE  C_FETCH_DEPT_DATA CURSOR WITH RETURN FOR 

SELECT 
	DEPTID AS COST_CENTER,
	DEPTNAME  AS DEPTNAME
FROM 
	DB2DBA.MB_MVP_VW
WHERE 
	EMPL_STATUS = 'A'
	AND DEPTNAME != ' ';

--------------------------------------------------------------------------------------------------
---------------------------------CURSOR DECLARATION ENDS AND PROCESSING STARTS--------------------
--------------------------------------------------------------------------------------------------

OPEN C_FETCH_DEPT_DATA ;
---------------------------------------------------------------------------------------------------
------------------------------------------PROCESSING ENDS------------------------------------------
---------------------------------------------------------------------------------------------------

---------------------------------------------------------------------------------------------------
------------------------------------------PROCEDURE CREATION ENDS----------------------------------
---------------------------------------------------------------------------------------------------
END 